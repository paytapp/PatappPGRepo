package com.paymentgateway.phonepe;

import java.io.*;
import java.util.*;

import org.springframework.stereotype.Service;

@Service
public class PhonePeCommon {
	   
	   public static Properties getAllProperties() throws IOException {
		  String fileName = ".//paymentgateway-pg-ws//src//main//java//com//paymentgateway//phonepe//phonePe.properties"; 
		  FileInputStream fis = null;
	      Properties prop = null;
	      try {
	         fis = new FileInputStream(fileName);
	         prop = new Properties();
	         prop.load(fis);
	      } catch(FileNotFoundException fnfe) {
	         fnfe.printStackTrace();
	      } catch(IOException ioe) {
	         ioe.printStackTrace();
	      } finally {
	         fis.close();
	      }
	      return prop;
	   }
	   
	   public static String getPropertyByKey(String key) throws IOException {
			  String fileName = "D:\\Paytapp\\thor-main\\paymentgateway-pg-ws\\src\\main\\java\\com\\paymentgateway\\phonePe\\phonePe.properties"; 
			  FileInputStream fis = null;
		      Properties prop = null;
		      try {
		         fis = new FileInputStream(fileName);
		         prop = new Properties();
		         prop.load(fis);
		      } catch(FileNotFoundException fnfe) {
		         fnfe.printStackTrace();
		      } catch(IOException ioe) {
		         ioe.printStackTrace();
		      } finally {
		         fis.close();
		      }
		      String value = prop.getProperty(key);
		      return value;
		   }
	   public static void main(String args[]) {
		   String ymlFileLocation = System.getenv("PG_PROPS");
		   HashMap propValues;
		   try {
			   propValues=readProperty("phonePe.properties");
			  // for(int i=0;i<propValues.size();i++) {
				   System.out.println("Key --"+propValues+"---Value----");
			   //}
			//System.out.println("Filee location is --"+ymlFileLocation);   
		   }catch(Exception e){
			   e.printStackTrace();
		   }
	   }
	   public static HashMap<String, String> readProperty(String propFileName) {
		   HashMap propMap=new HashMap<String, String>();
		   String ymlFileLocation="";
		   String dataArr[]=new String[2];
		   try {
			   ymlFileLocation = System.getenv("PG_PROPS");
			   System.out.println("File location is ----"+ymlFileLocation);
			   File myObj = new File(ymlFileLocation+propFileName);
			   Scanner myReader = new Scanner(myObj);
			  // System.out.println("File Name with location is #####----"+myReader);
			      while (myReader.hasNextLine()) {
			        String data = myReader.nextLine();
			        System.out.println(data);
			        dataArr[0]=data.split("=")[0];
			        dataArr[1]=data.split("=")[1];
			        propMap.put(dataArr[0], dataArr[1]);
			      }
			      myReader.close();
		   }catch(Exception e) {
			   e.printStackTrace();
		   }
		   return propMap;
	   }

}
